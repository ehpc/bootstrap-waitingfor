!function(e,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(d){return e.waitingDialog=o(d)}):e.waitingDialog=e.waitingDialog||o(e.jQuery)}(this,function(e){"use strict";function o(o,d){o&&o.remove(),e("#bootstrapWaitingforModal").remove();var a=null===d.nonce?"":' nonce="'+d.nonce+'"',n=e.parseHTML('<div id="bootstrapWaitingforModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"'+a+'><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header" style="display: none;"'+a+'></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"'+a+'><div class="progress-bar" style="width: 100%"'+a+"></div></div></div></div></div></div>");return e("body").append(n),e("#bootstrapWaitingforModal")}var d,a,n,t;return{show:function(s,i){"undefined"==typeof i&&(i={}),"undefined"==typeof s&&(s="Loading"),a=e.extend({headerText:"",headerSize:3,headerClass:"",dialogSize:"m",progressType:"",contentElement:"p",contentClass:"content",onHide:null,onShow:null,nonce:null},i);var r,l;d=o(d,a),d.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+a.dialogSize),d.find(".progress-bar").attr("class","progress-bar progress-bar-striped progress-bar-animated"),a.progressType&&(d.find(".progress-bar").addClass("progress-bar-"+a.progressType),d.find(".progress-bar").addClass("bg-"+a.progressType)),r=e("<h"+a.headerSize+" />"),r.css({margin:0}),a.headerClass&&r.addClass(a.headerClass),l=e("<"+a.contentElement+" />"),a.contentClass&&l.addClass(a.contentClass),a.headerText===!1?(l.html(s),d.find(".modal-body").prepend(l)):a.headerText?(r.html(a.headerText),d.find(".modal-header").html(r).show(),l.html(s),d.find(".modal-body").prepend(l)):(r.html(s),d.find(".modal-header").html(r).show()),"function"==typeof a.onHide&&d.off("hidden.bs.modal").on("hidden.bs.modal",function(){a.onHide.call(d)}),"function"==typeof a.onShow&&d.off("shown.bs.modal").on("shown.bs.modal",function(){a.onShow.call(d)}),d.modal(),n=document.getElementById("bootstrapWaitingforModal"),window.bootstrap&&window.bootstrap.Modal&&window.bootstrap.Modal.getOrCreateInstance&&(t=window.bootstrap.Modal.getOrCreateInstance(n),t.show()),t&&n.addEventListener("shown.bs.modal",function(){d.data("shown",!0)}),d.on("shown.bs.modal",function(){d.data("shown",!0)})},hide:function(e){"undefined"!=typeof d&&(d.data("shown")===!0?(t?t.hide():d.modal("hide"),e&&e(d)):t?n.addEventListener("shown.bs.modal",function(){t.hide(),e&&e(d)}):d.on("shown.bs.modal",function(){d.modal("hide"),e&&e(d)}))},message:function(e){return"undefined"!=typeof d?"undefined"!=typeof e?d.find(".modal-header>h"+a.headerSize).html(e):d.find(".modal-header>h"+a.headerSize).html():void 0}}});